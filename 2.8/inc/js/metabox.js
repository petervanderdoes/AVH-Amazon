var avhamazonmetabox=function(){};avhamazonmetabox.prototype={options:{},generateShortCode:function(){var b=this["options"]["content"],a="";delete this["options"]["content"];jQuery.each(this["options"],function(c,d){if(d!=""){a+=" "+c+'="'+d+'"'}});if(b!=""){returnvalue="[avhamazon"+a+"]"+b+"[/avhamazon]"}else{returnvalue="[avhamazon"+a+"]"}return returnvalue},sendToEditor:function(b,d){this.options={};var e=this,a,c,g;switch(b){case"asin":g=jQuery(d).find("input[id^=avhamazon_scasin]:not(input:radio),input[id^=avhamazon_scasin]:radio:checked,select[id^=avhamazon_scasin]");break;case"wishlist":g=jQuery(d).find("input[id^=avhamazon_scwishlist]:not(input:radio),input[id^=avhamazon_scwishlist]:radio:checked,select[id^=avhamazon_scwishlist]");break}g.each(function(){a=this.name.split("_");c=this.name.substring(a[0].length+a[1].length+2,this.name.length);e.options[c]=this.value});send_to_editor(this.generateShortCode());return false}};jQuery(document).ready(function(a){a("#avhamazon_submit_wishlist").click(avhamazon_metabox_submit_wishlist);a("#avhamazon_wishlist_show").find("input").keydown(avhamazon_metabox_wishlist);a("#avhamazon_wishlist_show").find("select").keydown(avhamazon_metabox_wishlist);a("#avhamazon_submit_asin").click(avhamazon_metabox_submit_asin);a("#avhamazon_asin_show").find("input").keydown(avhamazon_metabox_asin);a("#avhamazon_asin_show").find("select").keydown(avhamazon_metabox_asin);a("#avhamazon_wishlist_loading").hide();a("#avhamazon_asin_loading").hide();a("#avhamazon_tabs a").click(function(){var b=a(this).attr("href");a(this).parent().addClass("avhamazon-tabs-selected").siblings("li").removeClass("avhamazon-tabs-selected");a(this).parent().parent().siblings(".avhamazon-tabs-panel").hide();a(b).show();if("#avhamazon_tab_wishlist"==b){deleteUserSetting("avhamazonwish")}else{setUserSetting("avhamazonwish","asin")}return false});if(getUserSetting("avhamazonwish")){a('#avhamazon_tabs a[href="#avhamazon_tab_asin"]').click()}});function avhamazon_metabox_submit_wishlist(){var a=new Array,b;a[0]=jQuery("#avhamazon_scwishlist_wishlist").attr("value");a[1]=jQuery("#avhamazon_scwishlist_locale").attr("value");b=jQuery("#avhamazon_ajax_nonce").attr("value");if(a[0]){avhamazon_metabox_submit("wishlist","#avhamazon_wishlist_output","#avhamazon_wishlist_loading",a,b)}else{alert("No Wish List ID given")}return false}function avhamazon_metabox_wishlist(b){var a=(b.which)?b.which:window.event.keyCode;if(a==13){return avhamazon_metabox_submit_wishlist(b)}return true}function avhamazon_metabox_submit_asin(c){var a=new Array,b;c.preventDefault;a[0]=jQuery("#avhamazon_asin_nr").attr("value");a[1]=jQuery("#avhamazon_scasin_locale").attr("value");b=jQuery("#avhamazon_ajax_nonce").attr("value");if(a[0]){avhamazon_metabox_submit("asin","#avhamazon_asin_output","#avhamazon_asin_loading",a,b)}else{alert("No ASIN given")}return false}function avhamazon_metabox_asin(b){var a=(b.which)?b.which:window.event.keyCode;if(a==13){return avhamazon_metabox_submit_asin(b)}return true}function avhamazon_metabox_submit(e,c,d,b,a){jQuery(c).hide();jQuery(d).show();jQuery("avhamazon_wishlist_loading_pic").css("visibility","visible");jQuery.post(wpListL10n.url,{action:"avhamazon_metabox",cookie:encodeURIComponent(document.cookie),avhamazon_mb_action:e,"avhamazon_mb_values[]":b,avhamazon_ajax_nonce:a},function(f,g){jQuery(d).hide();jQuery(c).html(f.substr(0,f.length-1));jQuery(c).find("#avhamazon_sendtoeditor").each(function(){jQuery(this).click(avhamazon_metabox_sendtoeditor)});jQuery(c).show()})}function avhamazon_metabox_sendtoeditor(){var a=this.name;return(avhamazon.sendToEditor(a,this.form))};